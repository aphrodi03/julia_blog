<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/julia_blog/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/julia_blog/css/franklin.css"> <link rel=stylesheet  href="/julia_blog/css/basic.css"> <link rel=icon  href="/julia_blog/assets/favicon.png"> <title>Franklin.jlパッケージの機能拡張</title> <header> <div class=blog-name ><a href="/julia_blog/">ジュリアまさぐり隊</a></div> <nav> <ul> <li><a href="/julia_blog/">Home</a> <li><a href="/julia_blog/operator/">Operators</a> <li><a href="/julia_blog/admonitions/">Admonitions</a> </ul> </nav> </header> <div class=franklin-content ><h1 id="franklinjlパッケージの機能拡張"><a href="#franklinjlパッケージの機能拡張" class=header-anchor >Franklin.jlパッケージの機能拡張</a></h1> <div class=franklin-toc ><ol><li><a href="#franklinjlとは">Franklin.jlとは</a><li><a href="#実装した機能_admonitions">実装した機能: Admonitions</a><ol><li><a href="#使い方">使い方</a></ol><li><a href="#実装したadmonitions一覧">実装したAdmonitions一覧</a><li><a href="#実装">実装</a><ol><li><a href="#実装方針">実装方針</a><li><a href="#実装詳細">実装詳細</a></ol></ol></div> <h2 id="franklinjlとは"><a href="#franklinjlとは" class=header-anchor >Franklin.jlとは</a></h2> <p>Franklin.jlは、Juliaの外部パッケージの一つで、Markdownファイルをhtmlファイルに変換する静的サイトジェネレータです。 <img src="/julia_blog/assets/franklin.png" alt="Franklin.jlの使用例" /> &#33;&#33;&#33; Note title&#61;&quot;実は...&quot; このブログはFranklin.jlで生成しています&#33; また、私達が実装した機能を実際に使用して作成しています。 &#33;&#33;&#33;</p> <h2 id="実装した機能_admonitions"><a href="#実装した機能_admonitions" class=header-anchor >実装した機能: Admonitions</a></h2> <p>Admonitionsは、以下のように警告、注意、ヒントなどのボックスを簡単に生成できる機能です。pythonの静的サイトジェネレータ&#40;つまりpython版のFranklin.jl&#41;にある機能で、今回はそれをFranklin.jlにも実装してみました。 &#33;&#33;&#33; Example Admonitionsの例 &#33;&#33;&#33;</p> <p>タイトルの「Example」はデフォルトのタイトルですが、自分で変えることもできます。 &#33;&#33;&#33; Warning title&#61;&quot;こんな男には気をつけろ&quot; ・男友達が少ない男 ・インスタの投稿がやたら多い男 &#33;&#33;&#33;</p> <h3 id="使い方"><a href="#使い方" class=header-anchor >使い方</a></h3> <pre><code class="julia hljs">!!! (Admonitionsの種類)
title=<span class=hljs-string >&quot;タイトル&quot;</span> <span class=hljs-comment >#必要な場合記述する。書かなければデフォルトのタイトルになる。</span>
本文
!!!</code></pre> <p>上のような文法でAdmonitionsを使用することができます。例えば、以下のように書くと先程の警告のAdmonitionsが生成できます。</p> <pre><code class="julia hljs">!!! Warning
title=<span class=hljs-string >&quot;こんな男には気をつけろ&quot;</span>
・男友達が少ない男
・インスタの投稿がやたら多い男
!!!</code></pre> <p>改行は必要ではなく、<code>&#33;&#33;&#33; Info 明日は休講です&#33;&#33;&#33;</code>のように一行で記述することもできます。<code>&#33;&#33;&#33; &#40;種類&#41;</code>と<code>&#33;&#33;&#33;</code>で挟まれてさえすればよいのです。 &#33;&#33;&#33; Info 明日は休講です&#33;&#33;&#33;</p> <h2 id="実装したadmonitions一覧"><a href="#実装したadmonitions一覧" class=header-anchor >実装したAdmonitions一覧</a></h2> <p><code>&#33;&#33;&#33; Info 情報&#33;&#33;&#33;</code> &#33;&#33;&#33; Info 情報&#33;&#33;&#33; <code>&#33;&#33;&#33; Note メモ&#33;&#33;&#33;</code> &#33;&#33;&#33; Note メモ&#33;&#33;&#33; <code>&#33;&#33;&#33; Warning 警告&#33;&#33;&#33;</code> &#33;&#33;&#33; Warning 警告&#33;&#33;&#33; <code>&#33;&#33;&#33; Bug バグ&#33;&#33;&#33;</code> &#33;&#33;&#33; Bug バグ&#33;&#33;&#33; <code>&#33;&#33;&#33; Summary 要約&#33;&#33;&#33;</code> &#33;&#33;&#33; Summary 要約&#33;&#33;&#33; <code>&#33;&#33;&#33; Success 成功&#33;&#33;&#33;</code> &#33;&#33;&#33; Success 成功&#33;&#33;&#33; <code>&#33;&#33;&#33; Failure 失敗&#33;&#33;&#33;</code> &#33;&#33;&#33; Failure 失敗&#33;&#33;&#33; <code>&#33;&#33;&#33; Danger 危険&#33;&#33;&#33;</code> &#33;&#33;&#33; Danger 危険&#33;&#33;&#33; <code>&#33;&#33;&#33; Tip ヒント&#33;&#33;&#33;</code> &#33;&#33;&#33; Tip ヒント&#33;&#33;&#33; <code>&#33;&#33;&#33; Question 質問&#33;&#33;&#33;</code> &#33;&#33;&#33; Question 質問&#33;&#33;&#33; <code>&#33;&#33;&#33; Example 例&#33;&#33;&#33;</code> &#33;&#33;&#33; Example 例&#33;&#33;&#33; <code>&#33;&#33;&#33; Quote 引用&#33;&#33;&#33;</code> &#33;&#33;&#33; Quote 引用&#33;&#33;&#33;</p> <h2 id="実装"><a href="#実装" class=header-anchor >実装</a></h2> <h3 id="実装方針"><a href="#実装方針" class=header-anchor >実装方針</a></h3> <p>マークダウン形式の文章では、以下のようにコードブロックを挿入することができます。</p> <pre><code class="c hljs"><span class=hljs-type >int</span> a = <span class=hljs-number >1</span>;
<span class=hljs-type >int</span> b = <span class=hljs-number >3</span>;
<span class=hljs-built_in >printf</span>(<span class=hljs-string >&quot;a * b = %d\n&quot;</span>, a*b);</code></pre> <p>これは以下のような文法で書くことができます。 &#33;&#33;&#33; Info title&#61;&quot;コードブロックの文法&quot;</p> <pre><code class="c hljs"><span class=hljs-type >int</span> a = <span class=hljs-number >1</span>;
<span class=hljs-type >int</span> b = <span class=hljs-number >3</span>;
<span class=hljs-built_in >printf</span>(<span class=hljs-string >&quot;a * b = %d\n&quot;</span>, a*b);</code></pre> <p>&#33;&#33;&#33; 一方で、Admonitionsは以下のように記述できます。</p> <pre><code class="julia hljs">!!! Warning
title=<span class=hljs-string >&quot;こんな男には気をつけろ&quot;</span>
・男友達が少ない男
・インスタの投稿がやたら多い男
!!!</code></pre> <p>文法が非常に似ていることがわかります。このことから、Admonitionsはコードブロックの実装方法を参考にすれば実装できると考えました。 実際、コードブロックの実装とAdmonitionsの実装は7割同じです。</p> <h3 id="実装詳細"><a href="#実装詳細" class=header-anchor >実装詳細</a></h3> <ul> <li><p><strong>特定の文字列を辞書に登録</strong></p> </ul> <pre><code class="julia hljs"><span class=hljs-comment >#Franklin.jl/src/parser/markdown/tokens.jl</span>
<span class=hljs-keyword >const</span> MD_TOKENS = LittleDict{<span class=hljs-built_in >Char</span>, <span class=hljs-built_in >Vector</span>{TokenFinder}}(

               <span class=hljs-comment >#(中略)</span>

<span class=hljs-string >&#x27;!&#x27;</span>  =&gt; [ isexactly(<span class=hljs-string >&quot;!!! Info&quot;</span>) =&gt; :ADMONITION_INFO,
              isexactly(<span class=hljs-string >&quot;!!! Note&quot;</span>) =&gt; :ADMONITION_NOTE,
              isexactly(<span class=hljs-string >&quot;!!! Warning&quot;</span>) =&gt; :ADMONITION_WARNING,
              isexactly(<span class=hljs-string >&quot;!!! Danger&quot;</span>) =&gt; :ADMONITION_DANGER,
              isexactly(<span class=hljs-string >&quot;!!! Success&quot;</span>) =&gt; :ADMONITION_SUCCESS,
              isexactly(<span class=hljs-string >&quot;!!! Bug&quot;</span>) =&gt; :ADMONITION_BUG,
              isexactly(<span class=hljs-string >&quot;!!! Summary&quot;</span>) =&gt; :ADMONITION_SUMMARY,
              isexactly(<span class=hljs-string >&quot;!!! Tip&quot;</span>) =&gt; :ADMONITION_TIP,
              isexactly(<span class=hljs-string >&quot;!!! Failure&quot;</span>) =&gt; :ADMONITION_FAILURE,
              isexactly(<span class=hljs-string >&quot;!!! Question&quot;</span>) =&gt; :ADMONITION_QUESTION,
              isexactly(<span class=hljs-string >&quot;!!! Quote&quot;</span>) =&gt; :ADMONITION_QUOTE,
              isexactly(<span class=hljs-string >&quot;!!! Example&quot;</span>) =&gt; :ADMONITION_EXAMPLE,
              isexactly(<span class=hljs-string >&quot;!!!&quot;</span>)      =&gt; :ADMONITION_CLOSE,
            ]
    )</code></pre> <p>マークダウン形式の文章中の特定の文字列&#40;<code>&#33;&#33;&#33; Info</code>&#41;などをトークンとして辞書MD&#95;TOKENSに登録します。 各トークンにはADMONITION&#95;INFOなどの名前をつけています。</p> <pre><code class="julia hljs"><span class=hljs-string >&#x27;`&#x27;</span>  =&gt; [ isexactly(<span class=hljs-string >&quot;`&quot;</span>,  (<span class=hljs-string >&#x27;`&#x27;</span>,), <span class=hljs-literal >false</span>)  =&gt; :CODE_SINGLE, <span class=hljs-comment ># `⎵</span>
            isexactly(<span class=hljs-string >&quot;``&quot;</span>, (<span class=hljs-string >&#x27;`&#x27;</span>,), <span class=hljs-literal >false</span>)  =&gt; :CODE_DOUBLE, <span class=hljs-comment ># ``⎵*</span>
            isexactly(<span class=hljs-string >&quot;```&quot;</span>,   SPACE_CHAR) =&gt; :CODE_TRIPLE,  <span class=hljs-comment ># ```⎵*</span>
            isexactly(<span class=hljs-string >&quot;```!&quot;</span>,  SPACE_CHAR) =&gt; :CODE_TRIPLE!, <span class=hljs-comment ># ```!⎵*</span>
            isexactly(<span class=hljs-string >&quot;```&gt;&quot;</span>,  SPACE_CHAR) =&gt; :CODE_REPL,    <span class=hljs-comment ># ```&gt;⎵*</span>
            isexactly(<span class=hljs-string >&quot;```?&quot;</span>,  SPACE_CHAR) =&gt; :CODE_HELP,    <span class=hljs-comment ># ```?⎵*</span>
            isexactly(<span class=hljs-string >&quot;```;&quot;</span>,  SPACE_CHAR) =&gt; :CODE_SHELL,   <span class=hljs-comment ># ```;⎵*</span>
            isexactly(<span class=hljs-string >&quot;```]&quot;</span>,  SPACE_CHAR) =&gt; :CODE_PKG,     <span class=hljs-comment ># ```]⎵*</span>
            <span class=hljs-comment ># 3+ can be named</span>
            is_language(<span class=hljs-number >3</span>)                 =&gt; :CODE_LANG3,   <span class=hljs-comment ># ```lang*</span>
            isexactly(<span class=hljs-string >&quot;````&quot;</span>,  SPACE_CHAR) =&gt; :CODE_QUAD,    <span class=hljs-comment ># ````⎵*</span>
            is_language(<span class=hljs-number >4</span>)                 =&gt; :CODE_LANG4,   <span class=hljs-comment ># ````lang*</span>
            isexactly(<span class=hljs-string >&quot;`````&quot;</span>, SPACE_CHAR) =&gt; :CODE_PENTA,   <span class=hljs-comment ># `````⎵*</span>
            is_language(<span class=hljs-number >5</span>)                 =&gt; :CODE_LANG5,   <span class=hljs-comment ># `````lang*</span>
],</code></pre> <p>&#33;&#33;&#33; Info title&#61;&quot;MD<em>TOKENSに登録されているもの&quot; MD</em>TOKENSには上記のようにコードブロックを記述するための文字列が登録されており、 他にもタイトルヘッダの<code>#</code>や数式表示の<code>\&#36;</code>も登録されています。 &#33;&#33;&#33;</p> <ul> <li><p><strong>ブロックのリストに追加</strong></p> </ul> <pre><code class="julia hljs"><span class=hljs-comment >#Franklin.jl/src/parser/markdown/tokens.jl</span>
<span class=hljs-keyword >const</span> MD_OCB = [
  
  　<span class=hljs-comment >#(中略)</span>

    OCProto(:ADMONITION_INFO, :ADMONITION_INFO, (:ADMONITION_CLOSE,)), 
    OCProto(:ADMONITION_DANGER, :ADMONITION_DANGER, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_WARNING, :ADMONITION_WARNING, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_SUCCESS, :ADMONITION_SUCCESS, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_BUG, :ADMONITION_BUG, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_FAILURE, :ADMONITION_FAILURE, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_TIP, :ADMONITION_TIP, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_SUMMARY, :ADMONITION_SUMMARY, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_QUESTION, :ADMONITION_QUESTION, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_QUOTE, :ADMONITION_QUOTE, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_EXAMPLE, :ADMONITION_EXAMPLE, (:ADMONITION_CLOSE,)),
    OCProto(:ADMONITION_NOTE, :ADMONITION_NOTE, (:ADMONITION_CLOSE,))
]</code></pre> <p>Open-Close BlocksのリストにAdmonitionを追加します。これによって、<code>&#33;&#33;&#33;&#40;種類&#41;</code>と<code>&#33;&#33;&#33;</code>で挟まれた部分が1ブロックとして認識されます。</p> <ul> <li><p><strong>段落中の挿入への対応</strong></p> </ul> <pre><code class="julia hljs"><span class=hljs-comment >#Franklin.jl/src/parser/markdown/tokens.jl</span>
<span class=hljs-keyword >const</span> ADMONITION_NAMES = (
    :ADMONITION_INFO,
    :ADMONITION_NOTE,
    :ADMONITION_DANGER,
    :ADMONITION_WARNING,
    :ADMONITION_SUMMARY,
    :ADMONITION_TIP,
    :ADMONITION_FAILURE,
    :ADMONITION_BUG,
    :ADMONITION_QUESTION,
    :ADMONITION_QUOTE,
    :ADMONITION_EXAMPLE,
    :ADMONITION_SUCCESS
)

<span class=hljs-keyword >const</span> MD_CLOSEP = [MD_HEADER..., :DIV, CODE_BLOCKS_NAMES..., MATH_DISPLAY_BLOCKS_NAMES..., ADMONITION_NAMES...]</code></pre> <p>ADMONITION&#95;NAMESにブロック名をまとめて登録します。それをMD&#95;CLOSEPに登録します。MD&#95;CLOSEPに登録することによって、 段落中などにブロックが挿入されたときに、その段落を自動的に閉じることができるようになります。</p> <ul> <li><p><strong>htmlに変換する関数</strong></p> </ul> <pre><code class="julia hljs"><span class=hljs-comment >#Franklin.jl/src/converter/markdown/blocks.jl</span>
<span class=hljs-keyword >function</span> convert_block(β::AbstractBlock, lxdefs::<span class=hljs-built_in >Vector</span>{LxDef})::AS
    <span class=hljs-comment >#(中略)</span>
    βn == :ADMONITION_NOTE      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;note&quot;</span>)
    βn == :ADMONITION_INFO      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;info&quot;</span>)
    βn == :ADMONITION_SUCCESS      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;success&quot;</span>)
    βn == :ADMONITION_DANGER      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;danger&quot;</span>)
    βn == :ADMONITION_WARNING      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;warning&quot;</span>)
    βn == :ADMONITION_TIP      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;tip&quot;</span>)
    βn == :ADMONITION_FAILURE      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;failure&quot;</span>)
    βn == :ADMONITION_SUMMARY      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;summary&quot;</span>)
    βn == :ADMONITION_BUG      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;bug&quot;</span>)
    βn == :ADMONITION_QUESTION      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;question&quot;</span>)
    βn == :ADMONITION_QUOTE      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;quote&quot;</span>)
    βn == :ADMONITION_EXAMPLE      &amp;&amp; <span class=hljs-keyword >return</span> html_admonition(stent(β), <span class=hljs-string >&quot;example&quot;</span>)
    <span class=hljs-comment >#(中略)</span>
<span class=hljs-keyword >end</span></code></pre> <p>convert&#95;block関数は、ブロックをhtmlの文章に変換したものを返す関数です。 βnはマークダウン中から切り出されたブロックです。 ADMONITIONブロックがあれば、ブロックをhtmlの文章に変換するhtml&#95;admonition関数を呼び出します。html&#95;admonition関数については次の節で解説しますが、第二引数にAdmonitionの種類を取ります。ここでは、ブロックに対応する種類を第二引数としてhtml&#95;admonition関数を呼び出しています。 &#33;&#33;&#33; Info ブロックがコードブロックやタイトルヘッダの場合でも、convert_block関数がそれらをhtml形式に変換する関数を呼び出しています。 &#33;&#33;&#33;</p> <ul> <li><p><strong>html_admonition関数の実装</strong></p> </ul> <pre><code class="julia hljs"><span class=hljs-comment >#Franklin.jl/src/utils/html.jl</span>
<span class=hljs-keyword >function</span> html_admonition(content::AS, admonition_type::AS=<span class=hljs-string >&quot;&quot;</span>)::<span class=hljs-built_in >String</span>
    isempty(content) &amp;&amp; <span class=hljs-keyword >return</span> <span class=hljs-string >&quot;&quot;</span>
    
    admonition_class = <span class=hljs-string >&quot;admonition <span class=hljs-subst >$(admonition_type)</span>&quot;</span>
    title = uppercasefirst(admonition_type)

    m = match(<span class=hljs-string >r&quot;title=\&quot;([^\&quot;]+)\&quot;&quot;</span>, content)
    <span class=hljs-keyword >if</span> m !== <span class=hljs-literal >nothing</span>
        title = m.captures[<span class=hljs-number >1</span>] 
        content = replace(content, <span class=hljs-string >r&quot;title=\&quot;[^\&quot;]+\&quot;&quot;</span> =&gt; <span class=hljs-string >&quot;&quot;</span>) 
    <span class=hljs-keyword >end</span>
    
    content = replace(content, <span class=hljs-string >&quot;\n&quot;</span> =&gt; <span class=hljs-string >&quot;&lt;br&gt;&quot;</span>)
    
    
    <span class=hljs-keyword >return</span> html_text_admonition(admonition_class, title, content)
<span class=hljs-keyword >end</span></code></pre> <p>この関数は、Markdownファイルで使用される警告、ヒント、質問などのAdmonitionブロックをHTMLに変換するためのものです。</p> <p><strong>引数</strong></p> <ul> <li><p><code>content::AS</code>: Admonitionブロックのコンテンツ</p> <li><p><code>admonition_type::AS&#61;&quot;&quot;</code>&#40;オプション&#41;: Admonitionのタイプ&#40;例: &quot;Warning&quot;, &quot;Tip&quot;, &quot;Question&quot;など&#41;</p> </ul> <p><strong>返り値</strong></p> <ul> <li><p>AdmonitionブロックのHTML表現</p> </ul> <p><strong>機能</strong></p> <ol> <li><p><code>content</code>が空の場合は空の文字列を返します。</p> </ol> <pre><code class="julia hljs">isempty(content) &amp;&amp; <span class=hljs-keyword >return</span> <span class=hljs-string >&quot;&quot;</span></code></pre>
<ol start=2 >
<li><p>Admonitionのクラス名を&quot;admonition &#91;admonition_type&#93;&quot;という形式で作成します。</p>

</ol>
<pre><code class="julia hljs">admonition_class = <span class=hljs-string >&quot;admonition <span class=hljs-subst >$(admonition_type)</span>&quot;</span><span class=hljs-string >`</span></code></pre>
<ol start=3 >
<li><p>Admonitionのタイトルを<code>admonition_type</code>から生成しますが、<code>content</code>に<code>title&#61;&quot;&#91;TITLE&#93;&quot;</code>という形式のタイトル指定がある場合はそれを優先します。</p>

</ol>
<pre><code class="julia hljs">title = uppercasefirst(admonition_type)

m = match(<span class=hljs-string >r&quot;title=\&quot;([^\&quot;]+)\&quot;&quot;</span>, content)
<span class=hljs-keyword >if</span> m !== <span class=hljs-literal >nothing</span>
    title = m.captures[<span class=hljs-number >1</span>] 
    content = replace(content, <span class=hljs-string >r&quot;title=\&quot;[^\&quot;]+\&quot;&quot;</span> =&gt; <span class=hljs-string >&quot;&quot;</span>) 
<span class=hljs-keyword >end</span></code></pre>
<ol start=4 >
<li><p><code>content</code>内の改行を<code>&lt;br&gt;</code>に置き換えます。</p>

</ol>
<pre><code class="julia hljs">content = replace(content, <span class=hljs-string >&quot;\n&quot;</span> =&gt; <span class=hljs-string >&quot;&lt;br&gt;&quot;</span>)</code></pre>
<ol start=5 >
<li><p><code>html_text_admonition</code>関数を呼び出して、Admonitionのクラス名、タイトル、コンテンツからHTMLを生成します。</p>

</ol>
<pre><code class="julia hljs"><span class=hljs-keyword >return</span> html_text_admonition(admonition_class, title, content)</code></pre>
<p>この関数を使うことで、Markdownファイル内のAdmonitionブロックをHTMLに変換できます。</p>
<ul>
<li><p><strong>html&#95;text&#95;admoniton関数</strong></p>

</ul>
<pre><code class="julia hljs"><span class=hljs-comment >#Franklin.jl/src/utils/html.jl</span>
<span class=hljs-keyword >function</span> html_text_admonition(admonition_class, title, content)
    <span class=hljs-keyword >return</span> <span class=hljs-string >&quot;&quot;&quot;
    &lt;head&gt;
        &lt;style&gt;
            #(中略)
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class=&quot;<span class=hljs-variable >$admonition_class</span>&quot;&gt;
            &lt;p class=&quot;admonition-title&quot;&gt;<span class=hljs-variable >$title</span>&lt;/p&gt;
            &lt;p&gt;<span class=hljs-variable >$content</span>&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
    &quot;&quot;&quot;</span>
<span class=hljs-keyword >end</span></code></pre>
<p>この関数は、html&#95;admonition関数の返り値として呼び出される関数で、html形式の文章を生成します。</p>
<p><strong>引数</strong></p>
<ul>
<li><p><code>admonition_class</code>: Admonitionのタイプに応じたCSSクラス名 &#40;例: &quot;admonition warning&quot;&#41;</p>

<li><p><code>title</code>: Admonitionのタイトル</p>

<li><p><code>content</code>: Admonitionのコンテンツ</p>

</ul>
<p><strong>返り値</strong></p>
<p>AdmonitionブロックのHTML表現</p>
<p><strong>機能</strong></p>
<p>この関数は以下のようなHTMLを生成して返します:</p>
<pre><code class="html hljs"><span class=hljs-tag >&lt;<span class=hljs-name >head</span>&gt;</span>
    <span class=hljs-tag >&lt;<span class=hljs-name >style</span>&gt;</span><span class=language-css >
        <span class=hljs-comment >/* CSS styles for different types of admonitions */</span>
    </span><span class=hljs-tag >&lt;/<span class=hljs-name >style</span>&gt;</span>
<span class=hljs-tag >&lt;/<span class=hljs-name >head</span>&gt;</span>
<span class=hljs-tag >&lt;<span class=hljs-name >body</span>&gt;</span>
    <span class=hljs-tag >&lt;<span class=hljs-name >div</span> <span class=hljs-attr >class</span>=<span class=hljs-string >&quot;$admonition_class&quot;</span>&gt;</span>
        <span class=hljs-tag >&lt;<span class=hljs-name >p</span> <span class=hljs-attr >class</span>=<span class=hljs-string >&quot;admonition-title&quot;</span>&gt;</span>$title<span class=hljs-tag >&lt;/<span class=hljs-name >p</span>&gt;</span>
        <span class=hljs-tag >&lt;<span class=hljs-name >p</span>&gt;</span>$content<span class=hljs-tag >&lt;/<span class=hljs-name >p</span>&gt;</span>
    <span class=hljs-tag >&lt;/<span class=hljs-name >div</span>&gt;</span>
<span class=hljs-tag >&lt;/<span class=hljs-name >body</span>&gt;</span></code></pre>
<p>ヘッダ部分のCSS スタイルでは、Admonitionのタイプに応じて異なる見栄えを定義しています。 この関数を使うことで、Markdownファイル中のAdmonitionブロックをHTMLに変換できるようになります。</p>
<p><strong>ヘッダ部分</strong></p>
<p>この関数の中では、ヘッダ部分でAdmonitionのCSSスタイルを定義しています。これにより、各Admonitionタイプに応じた見栄えを実現しています。 ヘッダ部分には以下のような CSS スタイルが定義されています:</p>
<pre><code class="html hljs"><span class=hljs-tag >&lt;<span class=hljs-name >head</span>&gt;</span>
    <span class=hljs-tag >&lt;<span class=hljs-name >style</span>&gt;</span><span class=language-css >
        <span class=hljs-comment >/* Note admonition styles */</span>
        <span class=hljs-selector-class >.admonition</span><span class=hljs-selector-class >.note</span> {
            <span class=hljs-attribute >border-left-color</span>: <span class=hljs-number >#448aff</span>;
        }
        <span class=hljs-selector-class >.admonition</span><span class=hljs-selector-class >.note</span> <span class=hljs-selector-class >.admonition-title</span> {
            <span class=hljs-attribute >background-color</span>: <span class=hljs-built_in >rgba</span>(<span class=hljs-number >68</span>,<span class=hljs-number >138</span>,<span class=hljs-number >255</span>,.<span class=hljs-number >1</span>);
        }
        <span class=hljs-selector-class >.admonition</span><span class=hljs-selector-class >.note</span> <span class=hljs-selector-class >.admonition-title</span><span class=hljs-selector-pseudo >::before</span> {
            <span class=hljs-attribute >background-image</span>: <span class=hljs-built_in >url</span>(<span class=hljs-string >&#x27;data:image/svg+xml;...&#x27;</span>); 
        }

        <span class=hljs-comment >/* Warning admonition styles */</span>
        <span class=hljs-selector-class >.admonition</span><span class=hljs-selector-class >.warning</span> {
            <span class=hljs-attribute >border-left-color</span>: <span class=hljs-number >#ff9100</span>;
        }
        <span class=hljs-selector-class >.admonition</span><span class=hljs-selector-class >.warning</span> <span class=hljs-selector-class >.admonition-title</span> {
            <span class=hljs-attribute >background-color</span>: <span class=hljs-built_in >rgba</span>(<span class=hljs-number >255</span>,<span class=hljs-number >145</span>,<span class=hljs-number >0</span>,.<span class=hljs-number >1</span>);
        }
        <span class=hljs-selector-class >.admonition</span><span class=hljs-selector-class >.warning</span> <span class=hljs-selector-class >.admonition-title</span><span class=hljs-selector-pseudo >::before</span> {
            <span class=hljs-attribute >background-image</span>: <span class=hljs-built_in >url</span>(<span class=hljs-string >&#x27;data:image/svg+xml;...&#x27;</span>); 
        }

        <span class=hljs-comment >/* Additional admonition styles for other types */</span>
        ...
    </span><span class=hljs-tag >&lt;/<span class=hljs-name >style</span>&gt;</span>
<span class=hljs-tag >&lt;/<span class=hljs-name >head</span>&gt;</span></code></pre>
<p>このCSSは、Admonitionの種類ごとに以下の設定を行っています:</p>
<ul>
<li><p>左境界線の色</p>

<li><p>タイトル部分の背景色</p>

<li><p>タイトル部分のアイコン &#40;SVG画像&#41;</p>

</ul>
<p>これにより、Admonitionのタイプに応じた視覚的な区別が可能になります。 例えば、&quot;warning&quot;タイプのAdmonitionは橙色の左境界線と背景色、警告マークのアイコンが表示されます。 このようにヘッダ部分のCSSスタイルが、Admonitionの見栄えを定義しています。</p>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> ジュリアまさぐり隊. Last modified: November 11, 2024.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div>
    
    
        <script src="/julia_blog/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>